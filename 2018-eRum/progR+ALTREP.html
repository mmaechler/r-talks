<!DOCTYPE html>
<html>
<head>
  <title>What I find important when R Programming</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'What I find important when R Programming',
                        subtitle: 'and Recent Cool Features in R',
                useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                      },

      // Author information
      presenters: [
            {
        name:  'Martin Maechler, ETH Zurich; R Core Team' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="Maechler_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="Maechler_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="Maechler_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="Maechler_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="Maechler_files/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }

  </style>


</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">May 15, 2018 @ eRum Budapest</p>
          </hgroup>
  </slide>

<!-- smaller: true <<  use  { .smaller }  for *some* slide

NB:     toc: true , toc_depth: 2 ... have no effect for html presentations
-->

<!-- inspite documentation:  the  { .build } does not seem to work!  -->

<slide class=""><hgroup><h2>R and Me: How I got envolved</h2></hgroup><article  id="r-and-me-how-i-got-envolved">

<ul class = 'build'>
<li>History of R has been well described on <a href='https://en.wikipedia.org/wiki/R_(programming_language)' title=''>Wikipedia</a></li>
<li>notably its <a href='https://en.wikipedia.org/wiki/R_programming_language#cite_note-19' title=''>ref. [19]</a> :</li>
<li>I became involved in 1993;</li>
<li>1995: R became <em>Free Software</em> (licenced by GPL. <em>FOSS</em>:= Free and Open-Source),</li>
<li>&#8230; have been part of the <em>R Core</em> team since its formation in 1997.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>R is made by R Core Team</h2></hgroup><article  id="r-is-made-by-r-core-team">

<p><img src='www.r-project.org_R-core.png' title=''/> <!---   fails to *scale* the image ==> use this: --> <!-- <img src='www.r-project.org_R-core.png' style="height: 10%; " /> --> <!--    <p class='caption'>R Core Team (from `www.r-project.org`)</p> --></p>

</article></slide><slide class=""><hgroup><h2>R &#8211; made by R Core Team </h2><h3> <a href='https://www.r-project.org/contributors.html' title=''>https://www.r-project.org/contributors.html</a></h3></hgroup><article  id="r----made-by-r-core-team-httpswww.r-project.orgcontributors.html" class="smaller">

<p>&#8230; Since mid-1997 there has been a core group with write access to the R source, currently consisting of</p>

<table class = 'rmdtable'>
<tr class="odd">
<td align="left">Douglas Bates</td>
<td align="left">John Chambers</td>
<td align="left">Peter Dalgaard</td>
<td align="left">Robert Gentleman</td>
<td align="left">Kurt Hornik</td>
</tr>
<tr class="even">
<td align="left">Ross Ihaka</td>
<td align="left">Tomas Kalibera</td>
<td align="left">Michael Lawrence</td>
<td align="left">Friedrich Leisch</td>
<td align="left">Uwe Ligges</td>
</tr>
<tr class="odd">
<td align="left">Thomas Lumley</td>
<td align="left">Martin Maechler</td>
<td align="left">Martin Morgan</td>
<td align="left">Paul Murrell</td>
<td align="left">Martyn Plummer</td>
</tr>
<tr class="even">
<td align="left">Brian Ripley</td>
<td align="left">Deepayan Sarkar</td>
<td align="left">Duncan Temple Lang</td>
<td align="left">Luke Tierney</td>
<td align="left">Simon Urbanek</td>
</tr>
</table>

<p>plus Heiner Schwarte up to October 1999, Guido Masarotto up to June 2003, Stefano Iacus up to July 2014, Seth Falcon up to August 2015, and Duncan Murdoch up to September 2017.</p>

</article></slide><slide class=""><hgroup><h2>R == &quot;base&quot; + packages</h2></hgroup><article  id="r-base-packages" class="smaller">

<p>R : became &quot;viral&quot; thanks to CRAN&#39;s package system (Kurt Hornik and CRAN team): <img src='/scratch/users/maechler/R/MM/MISC/CRAN-stats/nrCRANpkg.png' title=''/> <!-- {width=140%} --> <!-- <img src='/scratch/users/maechler/R/MM/MISC/CRAN-stats/nrCRANpkg.png' style="height: 95%;" /> --></p>

<!------------------------------------------------------->

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>R Programming </h2><h3> 1. The <strong>ART</strong> of R Programming</h3></hgroup><article  id="r-programming-1.-the-art-of-r-programming">

</article></slide><slide class=""><hgroup><h2>Learn from the Masters</h2></hgroup><article  id="learn-from-the-masters">

<!-- ![Obi-Wan Kenobi to Luke Skywalker: "Use the Force, Luke!"  ('Starwars')](use-the-source-luke.jpg) -->

<img src='use-the-source-luke.jpg' title='fig:' style="width:70%" />

<p class="caption">

Obi-Wan Kenobi to Luke Skywalker: &quot;Use the Force, Luke!&quot; (&#39;Starwars&#39;)

</p>

</article></slide><slide class=""><hgroup><h2>Use the Source! </h2><h3> Read R Source code (to learn from the Masters)</h3></hgroup><article  id="use-the-source-read-r-source-code-to-learn-from-the-masters" class="build">

<ol>
<li><p>Instead of just &quot;googling&quot; and installing the package: Learn to &quot;Use the source!&quot; (a small effort, yes&#8230;): see Jenny Brian&#39;s <a href='https://github.com/jennybc/access-r-source' title=''>https://github.com/jennybc/access-r-source</a></p></li>
<li>Download the R source, and package <em>sources</em> instead of just installing them.

<ul>
<li>CRAN (and Bioconductor) should be your <em>primary</em> source,</li>
<li>everthing else (github, &#8230;) only if you know that the authors <em>and</em> the website are trustworthy</li>
</ul></li>
<li><p>Do read package sources, even before you write your first package. Hence, start to <em>love</em> files such as <code>&lt;mypkg&gt;_&lt;n.m&gt;.tar.gz</code></p></li>
</ol>

<!------------------------------------------------------->

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>R Programming </h2><h3> 2. R Programming with <strong>STYLE</strong></h3></hgroup><article  id="r-programming-2.-r-programming-with-style">

</article></slide><slide class=""><hgroup><h2>The Stackoverflow Keyboard</h2></hgroup><article  id="the-stackoverflow-keyboard">

<p>May 7, 2018 on the &quot;I&#39;m Programmer&quot; page: <a href='https://www.improgrammer.net/stackoverflow-keyboard/' title=''>https://www.improgrammer.net/stackoverflow-keyboard/</a></p>

<p><img src='StackOverflow-keyboard.png' title=''/> <!-- [Stackoverflow Keyboard](StackOverflow-keyboard.png) --></p>

<!-- ## DRY, not WET ! | DRY : *D*on't *R*epeat *Y*ourself -->

</article></slide><slide class=""><hgroup><h2>DRY, not WET !</h2></hgroup><article  id="dry-not-wet">

<p>From <img src='Wikipedia-logo.jpeg' title=''/>, the free encyclopedia</p>

<ul>
<li>DRY: <em>D</em>on&#39;t <em>R</em>epeat <em>Y</em>ourself</li>
</ul>

<ul class = 'build'>
<li>DRY principle := &quot;Every piece of knowledge must have a single, unambiguous, authoritative representation within a system&quot;.</li>
</ul>

<ul class = 'build'>
<li>By Andy Hunt and Dave Thomas book <strong>The Pragmatic Programmer</strong></li>
<li>When DRY principle is applied successfully, a modification of any single element of a system does not require a change in other logically unrelated elements. Additionally, elements that are logically related all change predictably and uniformly, and are thus kept in sync.</li>
</ul>

<ul class = 'build'>
<li>&#8230;</li>
</ul>

</article></slide><slide class=""><hgroup><h2>DRY vs WET solutions</h2></hgroup><article  id="dry-vs-wet-solutions">

<ul>
<li>Violations of <em>DRY</em> : typically referred to as <em>WET</em> solutions</li>
</ul>

<ul class = 'build'>
<li>&quot;WET&quot; stands for either

<ol>
<li><em>&quot;write everything twice&quot;</em>,</li>
<li><em>&quot;we enjoy typing&quot;</em> , or</li>
<li><em>&quot;waste everyone&#39;s time&quot;</em>.</li>
</ol></li>
</ul>

<ul class = 'build'>
<li>Copy-Paste Programming is <strong>bad</strong></li>
</ul>

<ul class = 'build'>
<li>Question: do useRs and progRammers prefer WET solutions ??</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Few remarks about style</h2></hgroup><article  id="few-remarks-about-style" class="smaller build">

<ul>
<li>Please<a id="fnref1" href="#fn1"><sup>1</sup></a> use the &quot;left arrow&quot;: the nice and expressive <code>&lt;-</code> instead of the <code>=</code> which has many other meanings in R. (R is a functional language: Assignments should <em>stand out</em> ):

<ul>
<li>Rstudio and ESS both have shortcut <code>[Alt]-</code> to produce  $<code>&lt;-</code> (4 chars, incl. 2 spaces)</li>
</ul></li>
</ul>

<p>([1]. Martin Mächler; Hadley Wickham in <a href='http://adv-r.had.co.nz/Style.html' title=''>http://adv-r.had.co.nz/Style.html</a>])</p>

<ul>
<li><p><em>Do</em> comment your R code: <em>You</em> (&quot;your future self&quot;) will be glad already in 1 month</p></li>
<li><p>Use <em>spaces</em> in your R code .. and be <em>better</em> than pretty printers (e.g. from R&#39;s source):</p></li>
</ul>

<pre class = 'prettyprint lang-r'>droplevels.data.frame &lt;- function(x, except = NULL, exclude, ...)
  {
    ix &lt;- vapply(x, is.factor, NA)
    if (!is.null(except)) ix[except] &lt;- FALSE
    x[ix] &lt;- if(missing(exclude))
                  lapply(x[ix], droplevels)
             else lapply(x[ix], droplevels, exclude=exclude)
    x
  }</pre>

<ul>
<li>Apart from data frames, there are also <strong>matrices</strong>; they are sometimes <em>much more efficient</em> (e.g., Colin Gillespie&#39;s <em>&quot;Efficient R Programming&quot;</em>)</li>
</ul>

<!------------------------------------------------------->

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>R Programming </h2><h3> 3. Functions, Testing, Packages</h3></hgroup><article  id="r-programming-3.-functions-testing-packages">

</article></slide><slide class=""><hgroup><h2>Everthing that happens in R &#8230;</h2></hgroup><article  id="everthing-that-happens-in-r-...">

<p>John Chambers: In R,</p>

<ul class = 'build'>
<li>Everything that exists

<ul>
<li>is an <strong>Object</strong></li>
</ul></li>
</ul>

<ul class = 'build'>
<li>Everything that happens

<ul>
<li>is a <strong>function call</strong></li>
</ul></li>
</ul>

<ul class = 'build'>
<li>You call functions all the time</li>
<li>==&gt; do <strong>write</strong> own functions all the time, e.g. <em>inside</em> other functions</li>
</ul>

<ul class = 'build'>
<li>Do learn about</li>
</ul>

<pre class = 'prettyprint lang-r'>lapply(X, FUN, ...)
do.call(&lt;FUN&gt;, args, ...)</pre>

</article></slide><slide class=""><hgroup><h2>Test (in) your functions</h2></hgroup><article  id="test-in-your-functions" class="build">

<ul>
<li><p>Can use</p>

<pre >if( &lt;problem&gt; )  stop(.....)</pre></li>
<li><p>Nicer, as &quot;assertion&quot;:</p>

<pre >stopifnot( &lt;must_be_1&gt; , &lt;must_be_2&gt; ,  ...)</pre></li>
</ul>

<p>or alternatively, since R 3.5.0,</p>

<pre >    stopifnot(exprs = {
      &lt;must_be_1&gt;
      &lt;must_be_2&gt;
      ...
    })</pre>

<p>(and yes, I know there are about a dozen packages for testing &#8230;)</p>

</article></slide><slide class=""><hgroup><h2>Put your functions in a package</h2></hgroup><article  id="put-your-functions-in-a-package">

<ul>
<li>and test them even more thoroughly</li>
<li>write nice help pages <strong>including</strong> examples</li>
<li>vignettes, &#8230;</li>
</ul>

<p>&#8230;. (building R packages that are sustainable &#8212; another lecture) &#8230;</p>

<!------------------------------------------------------->

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>4. New in R 3.5.0 </h2><h3> and more in future R : ALTREP</h3></hgroup><article  id="new-in-r-3.5.0-and-more-in-future-r-altrep">

</article></slide><slide class=""><hgroup><h2>NEWS - from new releases of R :</h2></hgroup><article  id="news---from-new-releases-of-r">

<ul>
<li>Click &quot;News&quot; on R webpage: <a href='https://www.r-project.org/news.html' title=''>https://www.r-project.org/news.html</a>

<ul>
<li>linking to <a href='https://cran.r-project.org/doc/manuals/r-release/NEWS.html' title=''>https://cran.r-project.org/doc/manuals/r-release/NEWS.html</a></li>
<li><em>Many</em> new features , notably</li>
</ul></li>
<li>ALTREP (not prominent in NEWS) is <em>remarkable</em> and may have large impact, Documented in R&#39;s source <a href='https://svn.r-project.org/R/branches/ALTREP/ALTREP.html' title=''>branches/ALTREP</a>. (or with extra exploration features from its <a href='https://github.com/wch/r-source/' title=''>github mirror</a>.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>ALTREP </h2><h3> ALTernative object REPresentations</h3></hgroup><article  id="altrep-alternative-object-representations">

<ul>
<li><p>At Stanford, 2016 after <strong>useR!</strong>, Gabe Becker talked about his ideas on the potential of <strong>alternative object representations</strong> and (R Core member) Luke Tierney agreed to form a working group as some of this had been floating around for quite some time <!-- , also  mentioned in earlier DSC presentations e.g., by "alternative R" implementors. --></p></li>
<li><p>Provisional docu: <a href='https://svn.r-project.org/R/branches/ALTREP/ALTREP.html' title=''>https://svn.r-project.org/R/branches/ALTREP/ALTREP.html</a> (Orig: Nov.2016; with updates up to Nov. 13, 2017)</p></li>
<li><p>another Talk of Luke (at Ross Ihaka&#39;s farewell conference, Dec. 2017): <a href='http://homepage.stat.uiowa.edu/~luke/talks/nzsa-2017.pdf' title=''>http://homepage.stat.uiowa.edu/~luke/talks/nzsa-2017.pdf</a></p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>ALTREP &#8211; as already in R 3.5.0</h2></hgroup><article  id="altrep----as-already-in-r-3.5.0" class="smaller">

<p>Adapted from <a href='https://svn.r-project.org/R/branches/ALTREP/ALTREP.html#sample_implementations' title=''>https://svn.r-project.org/R/branches/ALTREP/ALTREP.html#sample_implementations</a> :</p>

<h3>Compact Integer Vectors</h3>

<ul>
<li>Vectors <code>n1:n2</code> , <code>seq_along(n)</code> and <code>seq_len(m)</code>: represented compactly in terms of their start and end values.</li>
</ul>

<p>In R 3.4.4 (and older):</p>

<pre >## &gt; x &lt;- 1:1e10
## Error: cannot allocate vector of size 74.5 Gb</pre>

<p>where in <code>R 3.5.0++</code> and the ALTREP branch it works (very fast):</p>

<pre class = 'prettyprint lang-r'>x &lt;- 1:1e10</pre>

</article></slide><slide class=""><hgroup><h2>Compact Integer Vectors (2)</h2></hgroup><article  id="compact-integer-vectors-2" class="smaller">

<ul>
<li>Implication: for <strong>loop</strong> over a large range of integers that stops early no longer needs to allocate and fill in the full vector: In <code>R 3.5.0++</code> (and the ALTREP branch), this is instantaneous (a few ms), where in <code>R 3.4.4</code> it needs about 1.5 sec:</li>
</ul>

<pre class = 'prettyprint lang-r'>system.time(for (i in 1:1e9) break)</pre>

<pre >##    user  system elapsed 
##   0.012   0.001   0.013</pre>

<p>The <code>.Internal(inspect())</code> function shows that a compact representation has been used:</p>

<pre class = 'prettyprint lang-r'>.Internal(inspect(x))</pre>

<pre >## @7c86f80 14 REALSXP g0c0 [MARK,NAM(3)]  1 : 10000000000 (compact)</pre>

</article></slide><slide class=""><hgroup><h2>Compact Integer Vectors (3)</h2></hgroup><article  id="compact-integer-vectors-3">

<p><code>sum(x)</code> is very smart (using alleged Gauss-as-first-grader formula \(n(n+1)/2\)):</p>

<pre class = 'prettyprint lang-r'>system.time(print(sum(x)))</pre>

<pre >## [1] 5e+19</pre>

<pre >##    user  system elapsed 
##       0       0       0</pre>

<pre class = 'prettyprint lang-r'>n &lt;- length(x)
sum(x) == n*(n+1)/2</pre>

<pre >## [1] TRUE</pre>

<p>and <code>mean(x)</code> has been adapted to extract (in blocks) and <em>not</em> expand <code>x</code> (but still is much too slow here)</p>

</article></slide><slide class=""><hgroup><h2>Compact Integer Vectors (4)</h2></hgroup><article  id="compact-integer-vectors-4" class="smaller">

<p>The following R code is not even imaginable in regular R before R 3.5.0:</p>

<pre class = 'prettyprint lang-r'>x &lt;- 1:1e15
object.size(x) # 8000&#39;000&#39;000&#39;000&#39;048 bytes : 8000 TBytes -- ok, not really</pre>

<pre >## 8000000000000048 bytes</pre>

<pre class = 'prettyprint lang-r'>is.unsorted(x) # FALSE : i.e., R&#39;s *knows* it is sorted</pre>

<pre >## [1] FALSE</pre>

<pre class = 'prettyprint lang-r'>xs &lt;- sort(x)  # instantaneous !
.Internal(inspect(xs))</pre>

<pre >## @6247700 14 REALSXP g0c0 [NAM(3)]  1 : 1000000000000000 (compact)</pre>

<pre class = 'prettyprint lang-r'>anyNA(x)       # FALSE : i.e., R&#39;s *knows* it contains no NA&#39;s</pre>

<pre >## [1] FALSE</pre>

<pre class = 'prettyprint lang-r'>## (This does *NOT* fit on the slide:
try( l4 &lt;- x &lt; 4 ) # no way [in principle *could* be compacted]
x &lt;- 10:1e15
.Internal(inspect(x))</pre>

<pre >## @6ebd050 14 REALSXP g0c0 [NAM(3)]  10 : 1000000000000000 (compact)</pre>

</article></slide><slide class=""><hgroup><h2>Deferred String Conversions</h2></hgroup><article  id="deferred-string-conversions" class="smaller">

<ul>
<li>Conversion of numbers to strings is <strong>expensive</strong></li>
<li>Happens (with rarely needed!) default row labels on design matrices (created as)</li>
</ul>

<pre class = 'prettyprint lang-r'>as.character(1 : nrow)</pre>

<p>In <code>ALTREP</code>, the C-internal <code>coerce()</code> function returns a <strong>deferred string</strong> coercion. Examples:</p>

<pre class = 'prettyprint lang-r'>i8 &lt;- 1:1e8
ce8 &lt;- as.character(i8)
.Internal(inspect(ce8))</pre>

<pre >## @61756a8 16 STRSXP g0c0 [NAM(3)]   &lt;deferred string conversion&gt;
##   @628daf0 13 INTSXP g0c0 [NAM(3)]  1 : 100000000 (compact)</pre>

</article></slide><slide class=""><hgroup><h2>Deferred String Conversions -2-</h2></hgroup><article  id="deferred-string-conversions--2-" class="smaller">

<pre class = 'prettyprint lang-r'>system.time(print(c35 &lt;- ce8[1e7 + 3:5])) # very fast</pre>

<pre >## [1] &quot;10000003&quot; &quot;10000004&quot; &quot;10000005&quot;</pre>

<pre >##    user  system elapsed 
##       0       0       0</pre>

<pre class = 'prettyprint lang-r'>.Internal(inspect(ce8)) # unchanged</pre>

<pre >## @61756a8 16 STRSXP g1c0 [MARK,NAM(3)]   &lt;deferred string conversion&gt;
##   @628daf0 13 INTSXP g1c0 [MARK,NAM(3)]  1 : 100000000 (compact)</pre>

<pre class = 'prettyprint lang-r'>head(ce8)</pre>

<pre >## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</pre>

<pre class = 'prettyprint lang-r'>.Internal(inspect(ce8)) # unchanged</pre>

<pre >## @61756a8 16 STRSXP g1c0 [MARK,NAM(3)]   &lt;deferred string conversion&gt;
##   @628daf0 13 INTSXP g1c0 [MARK,NAM(3)]  1 : 100000000 (compact)</pre>

</article></slide><slide class=""><hgroup><h2>Deferred String Conversions -3-</h2></hgroup><article  id="deferred-string-conversions--3-" class="smaller">

<pre class = 'prettyprint lang-r'>.Internal(inspect(ce6 &lt;- as.character(1 : 1e6))) # shorter version</pre>

<pre >## @63fe3c8 16 STRSXP g0c0 [NAM(1)]   &lt;deferred string conversion&gt;
##   @63fe2e8 13 INTSXP g0c0 [NAM(3)]  1 : 1000000 (compact)</pre>

<pre class = 'prettyprint lang-r'>system.time( ce6[1] &lt;- &quot;a&quot; ) # 350 ms</pre>

<pre >##    user  system elapsed 
##   0.322   0.017   0.340</pre>

<pre class = 'prettyprint lang-r'>.Internal(inspect(ce6)) # now &lt;expanded string conversion&gt;</pre>

<pre >## @7f3edcb6f010 16 STRSXP g0c7 [NAM(1)] (len=1000000, tl=0)
##   @1404980 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] &quot;a&quot;
##   @163cd30 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] &quot;2&quot;
##   @13f3c48 09 CHARSXP g1c1 [MARK,gp=0x61] [ASCII] [cached] &quot;3&quot;
##   @31e5c08 09 CHARSXP g1c1 [MARK,gp=0x61,ATT] [ASCII] [cached] &quot;4&quot;
##   @15b0e48 09 CHARSXP g1c1 [MARK,gp=0x61,ATT] [ASCII] [cached] &quot;5&quot;
##   ...</pre>

</article></slide><slide class=""><hgroup><h2>Speedup for <code class="smaller">lm()</code></h2></hgroup><article  id="speedup-for-lm">

<p>Benefit: significant speedup in <code>lm()</code> for fitting a model with large \(n\) (R 3.5.0++):</p>

<pre class = 'prettyprint lang-r'>n &lt;- 1e7 ;  x &lt;- rnorm(n) ;  y &lt;- rnorm(n)
system.time(lm(y ~ x))</pre>

<pre >##    user  system elapsed 
##   1.860   0.507   2.383</pre>

<pre class = 'prettyprint lang-r'>system.time(lm(y ~ x))</pre>

<pre >##    user  system elapsed 
##   1.351   0.460   1.820</pre>

<p>Where the <code>elapsed</code> timings were <code>11.3</code> and <code>8.8</code> in R 3.4.4 (on same laptop).</p>

<p>Speedup: due entirely to <strong>not creating the row labels</strong> for the design matrix.<br/>Yes, have faster ways: <code>.lm.fit(cbind(1, x), y)</code> is \(3 \times\) faster. <!----------------------------------------></p>

</article></slide><slide class=""><hgroup><h2>Summary:</h2></hgroup><article  id="summary">

<ul>
<li>Martin M. \(\in\) R Core &#8212; R Core makes &quot;base R&quot;</li>
<li>The <strong>ART</strong> of R Programming : <em>Use the Source, Luke!</em></li>
<li>R Programming with <strong>STYLE</strong> : <em>Aim for DRY, not WET!</em></li>
<li>Functions, Testing, Packages : Write more functions, incl. 1-liners</li>
<li>New in R 3.5.0 (w/ more impact in the future): <u>ALT</u>ernative <u>REP</u>resentations</li>
</ul>

<p>

 

</p>

<ul class = 'build'>
<li><em>That&#39;s all Folks!</em></li>
</ul>

<ul class = 'build'>
<li>Questions, Remarks ?</li>
</ul></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "Maechler_files/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
